!function o(s,a,l){function u(e,t){if(!a[e]){if(!s[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(h)return h(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var n=a[e]={exports:{}};s[e][0].call(n.exports,function(t){return u(s[e][1][t]||t)},n,n.exports,o,s,a,l)}return a[e].exports}for(var h="function"==typeof require&&require,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});var n=r(t("./timeline/timeline")),o=r(t("./timeline/timelineEvent")),s=t("./util/colour"),a=r(t("./timeline/timePeriod")),l={};l.Timeline=n.default,l.Event=o.default,l.TimePeriod=a.default,l.Colour=s.Colour,l.Colour.parseColour=s.parseColour,window.shikio=l},{"./timeline/timePeriod":2,"./timeline/timeline":3,"./timeline/timelineEvent":4,"./util/colour":5}],2:[function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});var s=r(t("./timeline")),a=t("../util/svg"),l=t("../util/json"),u=t("../util/colour"),n=(h.fromJSON=function(t){var e=l.getNumberOrError(t,"start"),i=l.getNumberOrError(t,"end"),r=l.getStringOrError(t,"label"),n=u.parseColour("blue");t.colour&&(n=u.parseColour(l.getStringOrError(t,"colour")));var o=0;t.row&&(o=l.getNumberOrError(t,"row"));var s=!1;return t.whiteLabel&&(s=l.getBooleanOrError(t,"whiteLabel")),new h(e,i,r,n,s,o)},h.prototype.renderIn=function(t){var e,i=a.createGroup(),r=t.getHorizontalLocationInTimeline(this.start),n=t.getVerticalLocationInTimeline(this.row),o=t.getHorizontalLocationInTimeline(this.end)-t.getHorizontalLocationInTimeline(this.start);return e=this.whiteLabel?"white":"black",i.appendChild(a.createRectangle(r,n,o,s.default.timelineRowHeight,this.colour)),i.appendChild(a.createText(this.label,r+o/2,n+.15*s.default.timelineRowHeight,.6*s.default.timelineRowHeight,e,!0)),i},h.prototype.toJSON=function(){return{start:this.start,end:this.end,row:this.row,label:this.label,colour:this.colour,whiteLabel:this.whiteLabel}},h);function h(t,e,i,r,n,o){this.row=0,this.colour=u.parseColour("blue"),this.whiteLabel=!1,this.start=t,this.end=e,this.label=i,r&&(this.colour=r),null!=o&&(this.row=o),n&&(this.whiteLabel=n)}i.default=n},{"../util/colour":5,"../util/json":6,"../util/svg":9,"./timeline":3}],3:[function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../util/svg"),l=t("../util/lines"),g=r(t("./timePeriod")),b=r(t("./timelineEvent")),u=t("../util/math"),w=t("../util/json"),n=(T.fromJSON=function(t){for(var e=w.getStringOrError(t,"title"),i=w.getNumberOrError(t,"start"),r=w.getNumberOrError(t,"end"),n=w.getNumberOrError(t,"interval"),o=w.getNumberOrError(t,"widthPerInterval"),s=w.getNumberOrError(t,"rows"),a=[],l=0,u=w.getArrayOrError(t,"timePeriods");l<u.length;l++){var h=u[l],f=g.default.fromJSON(h);if(f.row>=s)throw Error("The time period is in row "+f.row+", but there are only "+s+" rows.");if(f.start<i)throw Error("The timeline starts at "+i+", but the time period starts at "+f.start+".");if(f.end>r)throw Error("The timeline ends at "+r+", but the time period ");a.push(f)}for(var d=[],c=0,p=w.getArrayOrError(t,"events");c<p.length;c++){var m=p[c],v=b.default.fromJSON(m);if(v.row>=s)throw Error("The timeline has "+s+" rows, but the event is in row "+v.row+".");if(v.time<i)throw Error("The timeline starts at "+i+", but the event occurs at "+v.time+".");if(v.time>r)throw Error("The timeline ends at "+r+", but the event occurs at "+v.time+".");d.push(v)}return new T(e,i,r,n,o,s,a,d)},T.builder=function(){return new o},Object.defineProperty(T.prototype,"barTopOffset",{get:function(){return 1.8*T.titleFontSize},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"barSideOffset",{get:function(){return 30},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"timelineSideOffset",{get:function(){return 150},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"timelineTopOffset",{get:function(){return this.barTopOffset+1.2*T.timeMarkFontSize},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"timelineHeight",{get:function(){return T.timelineRowSpace*(this.rows+1)+T.timelineRowHeight*this.rows},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"svgWidth",{get:function(){return this.timelineSideOffset+(this.endTime-this.startTime)/this.interval*this.widthPerInterval+this.timelineSideOffset},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"svgHeight",{get:function(){for(var t=0,e=0,i=this.events;e<i.length;e++){var r=i[e];r.yOffset+r.height>=t&&(t=r.yOffset+r.height)}return this.timelineTopOffset+this.timelineHeight+T.timelineEventSpace+t},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"eventTopOffset",{get:function(){return this.timelineTopOffset+this.timelineHeight+T.timelineEventSpace},enumerable:!0,configurable:!0}),T.prototype.getHorizontalLocationInTimeline=function(t){return(t-this.startTime)/this.interval*this.widthPerInterval+this.timelineSideOffset},T.prototype.getVerticalLocationInTimeline=function(t){return this.timelineTopOffset+T.timelineRowSpace*(t+1)+T.timelineRowHeight*t},T.prototype.renderTimelineBackgroundLines=function(){for(var t=a.createGroup("lines"),e=0,i=l.getTimePositions(this.startTime,this.endTime,this.interval,this.widthPerInterval);e<i.length;e++){var r=i[e];t.appendChild(a.createLine(r+this.timelineSideOffset,this.timelineTopOffset+T.timelineRowSpace/2+T.barShadowBlurRadius,r+this.timelineSideOffset,this.timelineTopOffset+this.timelineHeight-T.timelineRowSpace,2,T.timelineLineColour))}return t},T.prototype.renderTitle=function(){return a.createText(this.title,this.svgWidth/2,0,T.titleFontSize,"black",!0)},T.prototype.renderBar=function(){var t=a.createGroup("bar"),e=a.createRectangle(this.barSideOffset,this.barTopOffset-.2*T.timeMarkFontSize,this.svgWidth-2*this.barSideOffset,1.4*T.timeMarkFontSize,"white"),i=a.createRectangle(this.barSideOffset+T.barShadowBlurRadius+1,this.barTopOffset-.2*T.timeMarkFontSize+2*T.barShadowBlurRadius,this.svgWidth-2*this.barSideOffset-2*T.barShadowBlurRadius-2,1.4*T.timeMarkFontSize-T.barShadowBlurRadius,"black");i.style.filter="blur("+T.barShadowBlurRadius+"px)",t.appendChild(i),t.appendChild(e);for(var r=a.createGroup("marks"),n=l.getTimes(this.startTime,this.endTime,this.interval),o=l.getTimePositions(this.startTime,this.endTime,this.interval,this.widthPerInterval),s=0;s<n.length;s++)r.appendChild(a.createText(n[s].toString(),o[s]+this.timelineSideOffset,this.barTopOffset,T.timeMarkFontSize,"black",!0));return t.appendChild(r),t},T.prototype.renderTimelineBackground=function(){var t=a.createGroup("timeline");return t.appendChild(a.createRectangle(this.barSideOffset,this.timelineTopOffset,this.svgWidth-2*this.barSideOffset,this.timelineHeight,T.timelineBackgroundColour)),t.appendChild(this.renderTimelineBackgroundLines()),t},T.prototype.renderTimePeriods=function(){for(var t=a.createGroup("timePeriods"),e=0,i=this.timePeriods;e<i.length;e++){var r=i[e];t.appendChild(r.renderIn(this))}return t},T.prototype.computeEventYOffsets=function(){for(var t=0;t<this.events.length;t++){var e=this.getHorizontalLocationInTimeline(this.events[t].time),i=this.events[t].yOffset,r=this.events[t].height;console.log("current event: "+this.events[t]);for(var n=0;n<t;n++){var o=this.getHorizontalLocationInTimeline(this.events[n].time),s=this.events[n].yOffset,a=this.events[n].height;o<=e+T.eventBoxWidth+T.eventBoxHorizontalSpace&&(u.between(i,s,s+a)||u.between(i+r,s,s+a)||u.between(s,i,i+r)||u.between(s+a,i,i+r))&&(this.events[t].yOffset=s+a+T.eventBoxVerticalSpace,i=this.events[t].yOffset)}}},T.prototype.renderEventLines=function(){for(var t=a.createGroup("eventLines"),e=0,i=this.events;e<i.length;e++){var r=i[e];t.appendChild(r.renderLineIn(this))}return t},T.prototype.renderEvents=function(){for(var t=a.createGroup("events"),e=0,i=this.events;e<i.length;e++){var r=i[e];t.appendChild(r.renderIn(this))}return t},T.prototype.render=function(){this.computeEventYOffsets();var t=a.newSvg(this.svgWidth,this.svgHeight);return t.style.userSelect="none",t.appendChild(this.renderTitle()),t.appendChild(this.renderTimelineBackground()),t.appendChild(this.renderBar()),t.appendChild(this.renderEventLines()),t.appendChild(this.renderTimePeriods()),t.appendChild(this.renderEvents()),t},T.prototype.toJSON=function(){for(var t=[],e=0,i=this.timePeriods;e<i.length;e++){var r=i[e];t.push(r.toJSON())}for(var n=[],o=0,s=this.events;o<s.length;o++){var a=s[o];n.push(a.toJSON())}return{title:this.title,start:this.startTime,end:this.endTime,interval:this.interval,widthPerInterval:this.widthPerInterval,rows:this.rows,timePeriods:t,events:n}},T.titleFontSize=40,T.timeMarkFontSize=18,T.timelineRowSpace=20,T.timelineRowHeight=40,T.timelineBackgroundColour="#ebebeb",T.timelineLineColour="#e1e1e1",T.barShadowBlurRadius=1,T.timelineEventSpace=50,T.eventTitleFontSize=18,T.eventDescriptionFontSize=14,T.eventBoxWidth=150,T.eventBoxVerticalSpace=10,T.eventBoxHorizontalSpace=5,T.font="Roboto",T);function T(t,e,i,r,n,o,s,a){this.title=t,this.startTime=e,this.endTime=i,this.interval=r,this.widthPerInterval=n,this.rows=o,this.timePeriods=s,this.events=a.sort(function(t,e){return e.time-t.time})}i.default=n;var o=(s.prototype.titled=function(t){return this.title=t,this},s.prototype.startsAt=function(t){return this.startTime=t,this},s.prototype.endsAt=function(t){return this.endTime=t,this},s.prototype.withInterval=function(t){return this.interval=t,this},s.prototype.withWidthPerInterval=function(t){return this.widthPerInterval=t,this},s.prototype.withRows=function(t){return this.rows=t,this},s.prototype.withTimePeriod=function(t){if(t.row>=this.rows)throw Error("The time period is in row "+t.row+", but there are only "+this.rows+" rows.");if(t.start<this.startTime)throw Error("The timeline starts at "+this.startTime+", but the time period starts at "+t.start+".");if(t.end>this.endTime)throw Error("The timeline ends at "+this.endTime+", but the time period ");return this.timePeriods.push(t),this},s.prototype.withEvent=function(t){if(t.row>=this.rows)throw Error("The timeline has "+this.rows+" rows, but the event is in row "+t.row+".");if(t.time<this.startTime)throw Error("The timeline starts at "+this.startTime+", but the event occurs at "+t.time+".");if(t.time>this.endTime)throw Error("The timeline ends at "+this.endTime+", but the event occurs at "+t.time+".");return this.events.push(t),this},s.prototype.build=function(){return new n(this.title,this.startTime,this.endTime,this.interval,this.widthPerInterval,this.rows,this.timePeriods,this.events)},s);function s(){this.title="Untitled Timeline",this.startTime=0,this.endTime=0,this.interval=1,this.widthPerInterval=0,this.rows=1,this.timePeriods=[],this.events=[]}},{"../util/json":6,"../util/lines":7,"../util/math":8,"../util/svg":9,"./timePeriod":2,"./timelineEvent":4}],4:[function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});var o=r(t("./timeline")),n=t("../util/svg"),s=t("../util/textMeasurement"),a=t("../util/json"),l=(u.fromJSON=function(t){var e=a.getNumberOrError(t,"time"),i=a.getNumberOrError(t,"row"),r=a.getStringOrError(t,"title"),n=a.getStringOrError(t,"description"),o=null;return t.link&&(o=a.getStringOrError(t,"link")),new u(e,i,r,n,o)},u.prototype.breakTitleIntoLines=function(){return s.breakIntoLines(this.title,o.default.eventTitleFontSize)},u.prototype.breakDescriptionIntoLines=function(){return s.breakIntoLines(this.description,o.default.eventTitleFontSize)},u.prototype.renderPointIn=function(t){return n.createCircle(t.getHorizontalLocationInTimeline(this.time),t.getVerticalLocationInTimeline(this.row+1)-o.default.timelineRowSpace,o.default.timelineRowSpace/4,"white","black",2)},u.prototype.renderLineIn=function(t){return n.createLine(t.getHorizontalLocationInTimeline(this.time),t.getVerticalLocationInTimeline(this.row+1)-o.default.timelineRowSpace,t.getHorizontalLocationInTimeline(this.time),t.eventTopOffset+this.yOffset+this.height,2,"black")},u.prototype.renderTextIn=function(t){var e=n.createGroup();if(e.appendChild(n.createRectangle(t.getHorizontalLocationInTimeline(this.time)+1,t.eventTopOffset+this.yOffset,o.default.eventBoxWidth+o.default.eventBoxHorizontalSpace,this.height,"white")),this.link){var i=n.createSVGElement("a");i.setAttribute("href",this.link),i.setAttribute("target","_blank"),i.appendChild(n.createParagraph(t.getHorizontalLocationInTimeline(this.time)+o.default.eventBoxHorizontalSpace,t.eventTopOffset+this.yOffset,o.default.eventTitleFontSize,this.breakTitleIntoLines())),e.appendChild(i)}else e.appendChild(n.createParagraph(t.getHorizontalLocationInTimeline(this.time)+o.default.eventBoxHorizontalSpace,t.eventTopOffset+this.yOffset,o.default.eventTitleFontSize,this.breakTitleIntoLines()));return e.appendChild(n.createParagraph(t.getHorizontalLocationInTimeline(this.time)+o.default.eventBoxHorizontalSpace,t.eventTopOffset+this.titleHeight+this.yOffset,o.default.eventDescriptionFontSize,this.breakDescriptionIntoLines())),e},u.prototype.renderIn=function(t){var e=n.createGroup();return e.appendChild(this.renderPointIn(t)),e.appendChild(this.renderTextIn(t)),e},u.prototype.toJSON=function(){return{time:this.time,row:this.row,title:this.title,link:this.link,description:this.description}},u);function u(t,e,i,r,n){this.link=null,this.yOffset=0,this.time=t,this.row=e,this.title=i,this.description=r,n&&(this.link=n),this.titleHeight=1.2*this.breakTitleIntoLines().length*o.default.eventTitleFontSize,this.descriptionHeight=1.2*this.breakDescriptionIntoLines().length*o.default.eventDescriptionFontSize,this.height=this.titleHeight+this.descriptionHeight}i.default=l},{"../util/json":6,"../util/svg":9,"../util/textMeasurement":10,"./timeline":3}],5:[function(t,e,i){"use strict";var r,n;Object.defineProperty(i,"__esModule",{value:!0}),(n=r=i.Colour||(i.Colour={})).Red="#8b0000",n.LightRed="#ff4646",n.Blue="#00319e",n.LightBlue="#4789ff",n.Green="#2e6b00",n.LightGreen="#70ff43",i.parseColour=function(t){switch(t){case"red":return r.Red;case"lightRed":return r.LightRed;case"blue":return r.Blue;case"lightBlue":return r.LightBlue;case"green":return r.Green;case"lightGreen":return r.LightGreen;default:return t}}},{}],6:[function(t,e,i){"use strict";function r(t,e){if(null!=t[e])return t[e];throw Error("Expected value from key "+e+".")}Object.defineProperty(i,"__esModule",{value:!0}),i.getStringOrError=function(t,e){var i=r(t,e);if("string"!=typeof i)throw Error("Expected string from key "+e+".");return i},i.getNumberOrError=function(t,e){var i=r(t,e);if("number"!=typeof i)throw Error("Expected number from key "+e+".");return i},i.getBooleanOrError=function(t,e){var i=r(t,e);if("boolean"!=typeof i)throw Error("Expected boolean from key "+e+".");return i},i.getArrayOrError=function(t,e){var i=r(t,e);if(!Array.isArray(i))throw Error("Expected array from key "+e+".");return i}},{}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getTimePositions=function(t,e,i,r){for(var n=[],o=t,s=0;o<=e;o+=i,s++)n.push(s*r);return n[n.length-1]!=e&&n.push((e-t)%i/i*r+n[n.length-1]),n},i.getTimes=function(t,e,i){for(var r=[],n=t;n<e;n+=i)r.push(n);return r[r.length-1]!=e&&r.push(e),r}},{}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.between=function(t,e,i){return e<=t&&t<=i}},{}],9:[function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});var l=r(t("../timeline/timeline")),n="http://www.w3.org/2000/svg",o="\n@namespace svg url(http://www.w3.org/2000/svg);\n\nsvg|a text {\n    text-decoration: underline;\n    transition-duration: 0.3s;\n}\n\nsvg|a:hover, svg|a:active {\n    fill: blue;\n}\n".replace("\n","").replace(" ","");function u(t){return document.createElementNS(n,t)}function a(t){var e=u("g");return t&&e.setAttribute("id",t),e}i.newSvg=function(t,e){var i=u("svg");i.setAttribute("width",t.toString()),i.setAttribute("height",e.toString());var r=u("style");return r.innerHTML=o,i.appendChild(r),i},i.createSVGElement=u,i.createGroup=a,i.createLine=function(t,e,i,r,n,o){var s=u("line");return s.setAttribute("x1",t.toString()),s.setAttribute("y1",e.toString()),s.setAttribute("x2",i.toString()),s.setAttribute("y2",r.toString()),s.setAttribute("stroke-width",n.toString()),o&&s.setAttribute("stroke",o),s},i.createText=function(t,e,i,r,n,o,s){var a=u("text");return a.appendChild(document.createTextNode(t)),a.setAttribute("font-size",r.toString()),a.setAttribute("x",e.toString()),a.setAttribute("y",i.toString()),a.setAttribute("fill",n),o&&a.setAttribute("text-anchor","middle"),a.setAttribute("dominant-baseline","hanging"),s?a.setAttribute("font-family",s):a.setAttribute("font-family",l.default.font),a},i.createRectangle=function(t,e,i,r,n){var o=u("rect");return o.setAttribute("x",t.toString()),o.setAttribute("y",e.toString()),o.setAttribute("width",i.toString()),o.setAttribute("height",r.toString()),o.setAttribute("fill",n),o},i.createCircle=function(t,e,i,r,n,o){var s=u("circle");return s.setAttribute("cx",t.toString()),s.setAttribute("cy",e.toString()),s.setAttribute("r",i.toString()),s.setAttribute("fill",r),n&&s.setAttribute("stroke",n),o&&s.setAttribute("stroke-width",o.toString()),s},i.createParagraph=function(t,e,i,r){var n=a();n.setAttribute("transform","translate("+t+", "+e+")");var o,s=u("text");return s.setAttribute("font-size",i.toString()),s.setAttribute("font-family",l.default.font),s.setAttribute("dominant-baseline","hanging"),(o=[],r.forEach(function(t,e){var i=u("tspan");i.appendChild(document.createTextNode(t)),i.setAttribute("x","0"),0<e&&i.setAttribute("dy","1.2em"),o.push(i)}),o).forEach(function(t){s.appendChild(t)}),n.appendChild(s),n}},{"../timeline/timeline":3}],10:[function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});var o=t("./svg"),a=r(t("../timeline/timeline")),s=void 0;function l(t,e,i){s||(s=o.newSvg(0,0),document.body.appendChild(s));var r=o.createSVGElement("text");r.appendChild(document.createTextNode(t)),r.setAttribute("font-size",e.toString()),r.setAttribute("font-family",i),s.appendChild(r);var n=r.getComputedTextLength();return s.removeChild(r),n}i.measureText=l,i.breakIntoLines=function(t,e){for(var i=0,r=0,n=[],o=0;o<t.length;o++){if(" "==t.charAt(o)&&(r=o),l(t.slice(i,o),e,a.default.font)>a.default.eventBoxWidth&&r!=i){var s=t.slice(i,r);n.push(s),i=r}o==t.length-1&&n.push(t.slice(i,t.length))}for(o=0;o<n.length;o++)for(;" "==n[o].charAt(0);)n[o]=n[o].slice(1);return n}},{"../timeline/timeline":3,"./svg":9}]},{},[1,3,4,2,5,6,7,8,9,10]);