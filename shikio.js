!function o(s,a,l){function u(t,e){if(!a[t]){if(!s[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(h)return h(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var n=a[t]={exports:{}};s[t][0].call(n.exports,function(e){return u(s[t][1][e]||e)},n,n.exports,o,s,a,l)}return a[t].exports}for(var h="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:!0});var n=r(e("./timeline/timeline")),o=r(e("./timeline/timelineEvent")),s=e("./util/colour"),a=r(e("./timeline/timePeriod")),l={};l.Timeline=n.default,l.Event=o.default,l.TimePeriod=a.default,l.Colour=s.Colour,l.Colour.parseColour=s.parseColour,window.shikio=l},{"./timeline/timePeriod":2,"./timeline/timeline":3,"./timeline/timelineEvent":4,"./util/colour":5}],2:[function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:!0});var s=r(e("./timeline")),a=e("../util/svg"),l=e("../util/json"),u=e("../util/colour"),n=(h.fromJSON=function(e){var t=l.getNumberOrError(e,"start"),i=l.getNumberOrError(e,"end"),r=l.getStringOrError(e,"label"),n=u.parseColour("blue");e.colour&&(n=u.parseColour(l.getStringOrError(e,"colour")));var o=0;e.row&&(o=l.getNumberOrError(e,"row"));var s=!1;return e.whiteLabel&&(s=l.getBooleanOrError(e,"whiteLabel")),new h(t,i,r,n,s,o)},h.prototype.renderIn=function(e){var t,i=a.createGroup(),r=e.getHorizontalLocationInTimeline(this.start),n=e.getVerticalLocationInTimeline(this.row),o=e.getHorizontalLocationInTimeline(this.end)-e.getHorizontalLocationInTimeline(this.start);return t=this.whiteLabel?"white":"black",i.appendChild(a.createRectangle(r,n,o,s.default.timelineRowHeight,this.colour)),i.appendChild(a.createText(this.label,r+o/2,n+.15*s.default.timelineRowHeight,.6*s.default.timelineRowHeight,t,!0)),i},h);function h(e,t,i,r,n,o){this.row=0,this.colour=u.parseColour("blue"),this.whiteLabel=!1,this.start=e,this.end=t,this.label=i,r&&(this.colour=r),null!=o&&(this.row=o),n&&(this.whiteLabel=n)}i.default=n},{"../util/colour":5,"../util/json":6,"../util/svg":9,"./timeline":3}],3:[function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../util/svg"),l=e("../util/lines"),v=r(e("./timePeriod")),b=r(e("./timelineEvent")),u=e("../util/math"),w=e("../util/json"),n=(T.fromJSON=function(e){for(var t=w.getStringOrError(e,"title"),i=w.getNumberOrError(e,"start"),r=w.getNumberOrError(e,"end"),n=w.getNumberOrError(e,"interval"),o=w.getNumberOrError(e,"widthPerInterval"),s=w.getNumberOrError(e,"rows"),a=[],l=0,u=w.getArrayOrError(e,"timePeriods");l<u.length;l++){var h=u[l],f=v.default.fromJSON(h);if(f.row>=s)throw Error("The time period is in row "+f.row+", but there are only "+s+" rows.");if(f.start<i)throw Error("The timeline starts at "+i+", but the time period starts at "+f.start+".");if(f.end>r)throw Error("The timeline ends at "+r+", but the time period ");a.push(f)}for(var d=[],c=0,p=w.getArrayOrError(e,"events");c<p.length;c++){var m=p[c],g=b.default.fromJSON(m);if(g.row>=s)throw Error("The timeline has "+s+" rows, but the event is in row "+g.row+".");if(g.time<i)throw Error("The timeline starts at "+i+", but the event occurs at "+g.time+".");if(g.time>r)throw Error("The timeline ends at "+r+", but the event occurs at "+g.time+".");d.push(g)}return new T(t,i,r,n,o,s,a,d)},T.builder=function(){return new o},Object.defineProperty(T.prototype,"barTopOffset",{get:function(){return 1.8*T.titleFontSize},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"barSideOffset",{get:function(){return 30},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"timelineSideOffset",{get:function(){return 150},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"timelineTopOffset",{get:function(){return this.barTopOffset+1.2*T.timeMarkFontSize},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"timelineHeight",{get:function(){return T.timelineRowSpace*(this.rows+1)+T.timelineRowHeight*this.rows},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"svgWidth",{get:function(){return this.timelineSideOffset+(this.endTime-this.startTime)/this.interval*this.widthPerInterval+this.timelineSideOffset},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"svgHeight",{get:function(){for(var e=0,t=0,i=this.events;t<i.length;t++){var r=i[t];r.yOffset+r.height>=e&&(e=r.yOffset+r.height)}return this.timelineTopOffset+this.timelineHeight+T.timelineEventSpace+e},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"eventTopOffset",{get:function(){return this.timelineTopOffset+this.timelineHeight+T.timelineEventSpace},enumerable:!0,configurable:!0}),T.prototype.getHorizontalLocationInTimeline=function(e){return(e-this.startTime)/this.interval*this.widthPerInterval+this.timelineSideOffset},T.prototype.getVerticalLocationInTimeline=function(e){return this.timelineTopOffset+T.timelineRowSpace*(e+1)+T.timelineRowHeight*e},T.prototype.renderTimelineBackgroundLines=function(){for(var e=a.createGroup("lines"),t=0,i=l.getTimePositions(this.startTime,this.endTime,this.interval,this.widthPerInterval);t<i.length;t++){var r=i[t];e.appendChild(a.createLine(r+this.timelineSideOffset,this.timelineTopOffset+T.timelineRowSpace/2+T.barShadowBlurRadius,r+this.timelineSideOffset,this.timelineTopOffset+this.timelineHeight-T.timelineRowSpace,2,T.timelineLineColour))}return e},T.prototype.renderTitle=function(){return a.createText(this.title,this.svgWidth/2,0,T.titleFontSize,"black",!0)},T.prototype.renderBar=function(){var e=a.createGroup("bar"),t=a.createRectangle(this.barSideOffset,this.barTopOffset-.2*T.timeMarkFontSize,this.svgWidth-2*this.barSideOffset,1.4*T.timeMarkFontSize,"white"),i=a.createRectangle(this.barSideOffset+T.barShadowBlurRadius+1,this.barTopOffset-.2*T.timeMarkFontSize+2*T.barShadowBlurRadius,this.svgWidth-2*this.barSideOffset-2*T.barShadowBlurRadius-2,1.4*T.timeMarkFontSize-T.barShadowBlurRadius,"black");i.style.filter="blur("+T.barShadowBlurRadius+"px)",e.appendChild(i),e.appendChild(t);for(var r=a.createGroup("marks"),n=l.getTimes(this.startTime,this.endTime,this.interval),o=l.getTimePositions(this.startTime,this.endTime,this.interval,this.widthPerInterval),s=0;s<n.length;s++)r.appendChild(a.createText(n[s].toString(),o[s]+this.timelineSideOffset,this.barTopOffset,T.timeMarkFontSize,"black",!0));return e.appendChild(r),e},T.prototype.renderTimelineBackground=function(){var e=a.createGroup("timeline");return e.appendChild(a.createRectangle(this.barSideOffset,this.timelineTopOffset,this.svgWidth-2*this.barSideOffset,this.timelineHeight,T.timelineBackgroundColour)),e.appendChild(this.renderTimelineBackgroundLines()),e},T.prototype.renderTimePeriods=function(){for(var e=a.createGroup("timePeriods"),t=0,i=this.timePeriods;t<i.length;t++){var r=i[t];e.appendChild(r.renderIn(this))}return e},T.prototype.computeEventYOffsets=function(){for(var e=0;e<this.events.length;e++){var t=this.getHorizontalLocationInTimeline(this.events[e].time),i=this.events[e].yOffset,r=this.events[e].height;console.log("current event: "+this.events[e]);for(var n=0;n<e;n++){var o=this.getHorizontalLocationInTimeline(this.events[n].time),s=this.events[n].yOffset,a=this.events[n].height;o<=t+T.eventBoxWidth+T.eventBoxHorizontalSpace&&(u.between(i,s,s+a)||u.between(i+r,s,s+a)||u.between(s,i,i+r)||u.between(s+a,i,i+r))&&(this.events[e].yOffset=s+a+T.eventBoxVerticalSpace,i=this.events[e].yOffset)}}},T.prototype.renderEventLines=function(){for(var e=a.createGroup("eventLines"),t=0,i=this.events;t<i.length;t++){var r=i[t];e.appendChild(r.renderLineIn(this))}return e},T.prototype.renderEvents=function(){for(var e=a.createGroup("events"),t=0,i=this.events;t<i.length;t++){var r=i[t];e.appendChild(r.renderIn(this))}return e},T.prototype.render=function(){this.computeEventYOffsets();var e=a.newSvg(this.svgWidth,this.svgHeight);return e.style.userSelect="none",e.appendChild(this.renderTitle()),e.appendChild(this.renderTimelineBackground()),e.appendChild(this.renderBar()),e.appendChild(this.renderEventLines()),e.appendChild(this.renderTimePeriods()),e.appendChild(this.renderEvents()),e},T.titleFontSize=40,T.timeMarkFontSize=18,T.timelineRowSpace=20,T.timelineRowHeight=40,T.timelineBackgroundColour="#ebebeb",T.timelineLineColour="#e1e1e1",T.barShadowBlurRadius=1,T.timelineEventSpace=50,T.eventTitleFontSize=18,T.eventDescriptionFontSize=14,T.eventBoxWidth=150,T.eventBoxVerticalSpace=10,T.eventBoxHorizontalSpace=5,T.font="Roboto",T);function T(e,t,i,r,n,o,s,a){this.title=e,this.startTime=t,this.endTime=i,this.interval=r,this.widthPerInterval=n,this.rows=o,this.timePeriods=s,this.events=a.sort(function(e,t){return t.time-e.time})}i.default=n;var o=(s.prototype.titled=function(e){return this.title=e,this},s.prototype.startsAt=function(e){return this.startTime=e,this},s.prototype.endsAt=function(e){return this.endTime=e,this},s.prototype.withInterval=function(e){return this.interval=e,this},s.prototype.withWidthPerInterval=function(e){return this.widthPerInterval=e,this},s.prototype.withRows=function(e){return this.rows=e,this},s.prototype.withTimePeriod=function(e){if(e.row>=this.rows)throw Error("The time period is in row "+e.row+", but there are only "+this.rows+" rows.");if(e.start<this.startTime)throw Error("The timeline starts at "+this.startTime+", but the time period starts at "+e.start+".");if(e.end>this.endTime)throw Error("The timeline ends at "+this.endTime+", but the time period ");return this.timePeriods.push(e),this},s.prototype.withEvent=function(e){if(e.row>=this.rows)throw Error("The timeline has "+this.rows+" rows, but the event is in row "+e.row+".");if(e.time<this.startTime)throw Error("The timeline starts at "+this.startTime+", but the event occurs at "+e.time+".");if(e.time>this.endTime)throw Error("The timeline ends at "+this.endTime+", but the event occurs at "+e.time+".");return this.events.push(e),this},s.prototype.build=function(){return new n(this.title,this.startTime,this.endTime,this.interval,this.widthPerInterval,this.rows,this.timePeriods,this.events)},s);function s(){this.title="Untitled Timeline",this.startTime=0,this.endTime=0,this.interval=1,this.widthPerInterval=0,this.rows=1,this.timePeriods=[],this.events=[]}},{"../util/json":6,"../util/lines":7,"../util/math":8,"../util/svg":9,"./timePeriod":2,"./timelineEvent":4}],4:[function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:!0});var o=r(e("./timeline")),n=e("../util/svg"),s=e("../util/textMeasurement"),a=e("../util/json"),l=(u.fromJSON=function(e){var t=a.getNumberOrError(e,"time"),i=a.getNumberOrError(e,"row"),r=a.getStringOrError(e,"title"),n=a.getStringOrError(e,"description"),o=null;return e.link&&(o=a.getStringOrError(e,"link")),new u(t,i,r,n,o)},u.prototype.breakTitleIntoLines=function(){return s.breakIntoLines(this.title,o.default.eventTitleFontSize)},u.prototype.breakDescriptionIntoLines=function(){return s.breakIntoLines(this.description,o.default.eventTitleFontSize)},u.prototype.renderPointIn=function(e){return n.createCircle(e.getHorizontalLocationInTimeline(this.time),e.getVerticalLocationInTimeline(this.row+1)-o.default.timelineRowSpace,o.default.timelineRowSpace/4,"white","black",2)},u.prototype.renderLineIn=function(e){return n.createLine(e.getHorizontalLocationInTimeline(this.time),e.getVerticalLocationInTimeline(this.row+1)-o.default.timelineRowSpace,e.getHorizontalLocationInTimeline(this.time),e.eventTopOffset+this.yOffset+this.height,2,"black")},u.prototype.renderTextIn=function(e){var t=n.createGroup();if(t.appendChild(n.createRectangle(e.getHorizontalLocationInTimeline(this.time)+1,e.eventTopOffset+this.yOffset,o.default.eventBoxWidth+o.default.eventBoxHorizontalSpace,this.height,"white")),this.link){var i=n.createSVGElement("a");i.setAttribute("href",this.link),i.setAttribute("target","_blank"),i.appendChild(n.createParagraph(e.getHorizontalLocationInTimeline(this.time)+o.default.eventBoxHorizontalSpace,e.eventTopOffset+this.yOffset,o.default.eventTitleFontSize,this.breakTitleIntoLines())),t.appendChild(i)}else t.appendChild(n.createParagraph(e.getHorizontalLocationInTimeline(this.time)+o.default.eventBoxHorizontalSpace,e.eventTopOffset+this.yOffset,o.default.eventTitleFontSize,this.breakTitleIntoLines()));return t.appendChild(n.createParagraph(e.getHorizontalLocationInTimeline(this.time)+o.default.eventBoxHorizontalSpace,e.eventTopOffset+this.titleHeight+this.yOffset,o.default.eventDescriptionFontSize,this.breakDescriptionIntoLines())),t},u.prototype.renderIn=function(e){var t=n.createGroup();return t.appendChild(this.renderPointIn(e)),t.appendChild(this.renderTextIn(e)),t},u);function u(e,t,i,r,n){this.link=null,this.yOffset=0,this.time=e,this.row=t,this.title=i,this.description=r,n&&(this.link=n),this.titleHeight=1.2*this.breakTitleIntoLines().length*o.default.eventTitleFontSize,this.descriptionHeight=1.2*this.breakDescriptionIntoLines().length*o.default.eventDescriptionFontSize,this.height=this.titleHeight+this.descriptionHeight}i.default=l},{"../util/json":6,"../util/svg":9,"../util/textMeasurement":10,"./timeline":3}],5:[function(e,t,i){"use strict";var r,n;Object.defineProperty(i,"__esModule",{value:!0}),(n=r=i.Colour||(i.Colour={})).Red="#8b0000",n.LightRed="#ff4646",n.Blue="#00319e",n.LightBlue="#4789ff",n.Green="#2e6b00",n.LightGreen="#70ff43",i.parseColour=function(e){switch(e){case"red":return r.Red;case"lightRed":return r.LightRed;case"blue":return r.Blue;case"lightBlue":return r.LightBlue;case"green":return r.Green;case"lightGreen":return r.LightGreen;default:return e}}},{}],6:[function(e,t,i){"use strict";function r(e,t){if(null!=e[t])return e[t];throw Error("Expected value from key "+t+".")}Object.defineProperty(i,"__esModule",{value:!0}),i.getStringOrError=function(e,t){var i=r(e,t);if("string"!=typeof i)throw Error("Expected string from key "+t+".");return i},i.getNumberOrError=function(e,t){var i=r(e,t);if("number"!=typeof i)throw Error("Expected number from key "+t+".");return i},i.getBooleanOrError=function(e,t){var i=r(e,t);if("boolean"!=typeof i)throw Error("Expected boolean from key "+t+".");return i},i.getArrayOrError=function(e,t){var i=r(e,t);if(!Array.isArray(i))throw Error("Expected array from key "+t+".");return i}},{}],7:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getTimePositions=function(e,t,i,r){for(var n=[],o=e,s=0;o<=t;o+=i,s++)n.push(s*r);return n[n.length-1]!=t&&n.push((t-e)%i/i*r+n[n.length-1]),n},i.getTimes=function(e,t,i){for(var r=[],n=e;n<t;n+=i)r.push(n);return r[r.length-1]!=t&&r.push(t),r}},{}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.between=function(e,t,i){return t<=e&&e<=i}},{}],9:[function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:!0});var l=r(e("../timeline/timeline")),n="http://www.w3.org/2000/svg",o="\n@namespace svg url(http://www.w3.org/2000/svg);\n\nsvg|a text {\n    text-decoration: underline;\n    transition-duration: 0.3s;\n}\n\nsvg|a:hover, svg|a:active {\n    fill: blue;\n}\n";function u(e){return document.createElementNS(n,e)}function a(e){var t=u("g");return e&&t.setAttribute("id",e),t}i.newSvg=function(e,t){var i=u("svg");i.setAttribute("width",e.toString()),i.setAttribute("height",t.toString());var r=u("style");return r.innerHTML=o,i.appendChild(r),i},i.createSVGElement=u,i.createGroup=a,i.createLine=function(e,t,i,r,n,o){var s=u("line");return s.setAttribute("x1",e.toString()),s.setAttribute("y1",t.toString()),s.setAttribute("x2",i.toString()),s.setAttribute("y2",r.toString()),s.setAttribute("stroke-width",n.toString()),o&&s.setAttribute("stroke",o),s},i.createText=function(e,t,i,r,n,o,s){var a=u("text");return a.appendChild(document.createTextNode(e)),a.setAttribute("font-size",r.toString()),a.setAttribute("x",t.toString()),a.setAttribute("y",i.toString()),a.setAttribute("fill",n),o&&a.setAttribute("text-anchor","middle"),a.setAttribute("dominant-baseline","hanging"),s?a.setAttribute("font-family",s):a.setAttribute("font-family",l.default.font),a},i.createRectangle=function(e,t,i,r,n){var o=u("rect");return o.setAttribute("x",e.toString()),o.setAttribute("y",t.toString()),o.setAttribute("width",i.toString()),o.setAttribute("height",r.toString()),o.setAttribute("fill",n),o},i.createCircle=function(e,t,i,r,n,o){var s=u("circle");return s.setAttribute("cx",e.toString()),s.setAttribute("cy",t.toString()),s.setAttribute("r",i.toString()),s.setAttribute("fill",r),n&&s.setAttribute("stroke",n),o&&s.setAttribute("stroke-width",o.toString()),s},i.createParagraph=function(e,t,i,r){var n=a();n.setAttribute("transform","translate("+e+", "+t+")");var o,s=u("text");return s.setAttribute("font-size",i.toString()),s.setAttribute("font-family",l.default.font),s.setAttribute("dominant-baseline","hanging"),(o=[],r.forEach(function(e,t){var i=u("tspan");i.appendChild(document.createTextNode(e)),i.setAttribute("x","0"),0<t&&i.setAttribute("dy","1.2em"),o.push(i)}),o).forEach(function(e){s.appendChild(e)}),n.appendChild(s),n}},{"../timeline/timeline":3}],10:[function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:!0});var o=e("./svg"),a=r(e("../timeline/timeline")),s=void 0;function l(e,t,i){s||(s=o.newSvg(0,0),document.body.appendChild(s));var r=o.createSVGElement("text");r.appendChild(document.createTextNode(e)),r.setAttribute("font-size",t.toString()),r.setAttribute("font-family",i),s.appendChild(r);var n=r.getComputedTextLength();return s.removeChild(r),n}i.measureText=l,i.breakIntoLines=function(e,t){for(var i=0,r=0,n=[],o=0;o<e.length;o++){if(" "==e.charAt(o)&&(r=o),l(e.slice(i,o),t,a.default.font)>a.default.eventBoxWidth&&r!=i){var s=e.slice(i,r);n.push(s),i=r}o==e.length-1&&n.push(e.slice(i,e.length))}for(o=0;o<n.length;o++)for(;" "==n[o].charAt(0);)n[o]=n[o].slice(1);return n}},{"../timeline/timeline":3,"./svg":9}]},{},[1,3,4,2,5,6,7,8,9,10]);