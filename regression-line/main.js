!function(e){var t={};function n(i){if(t[i])return t[i].exports;var l=t[i]={i:i,l:!1,exports:{}};return e[i].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(i,l,function(t){return e[t]}.bind(null,l));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);class i{constructor(e,t){this.x=e,this.y=t}}function l(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function r(e,t,n,i){let r=l("circle");return r.setAttribute("cx",e.toString()),r.setAttribute("cy",t.toString()),r.setAttribute("r",n.toString()),r.setAttribute("fill",i),r}function a(e,t,n,i,r,a){let s=l("line");return s.setAttribute("x1",e.toString()),s.setAttribute("y1",t.toString()),s.setAttribute("x2",n.toString()),s.setAttribute("y2",i.toString()),s.setAttribute("stroke-width",r.toString()),a&&s.setAttribute("stroke",a),s}const s=document.getElementById("plot-container");const d=function(){let e=function(){let e=l("svg");return e.setAttribute("width",s.clientWidth.toString()),e.setAttribute("height",s.clientHeight.toString()),e}();return s.appendChild(e),e}();function o(){for(;d.firstElementChild;)d.removeChild(d.firstElementChild)}var u;!function(e){e[e.Mayer=0]="Mayer",e[e.MedianMedian=1]="MedianMedian"}(u||(u={}));var f=u;function c(e){let t=(e.length-1)/2;return Number.isInteger(t)?e[t]:(e[Math.floor(t)]+e[Math.ceil(t)])/2}class h{constructor(e){this.data=e}sortByX(){this.data.sort((function(e,t){return e.x-t.x}))}get minX(){let e=this.data[0].x;return this.data.forEach((function(t){t.x<e&&(e=t.x)})),e}get maxX(){let e=this.data[0].x;return this.data.forEach((function(t){t.x>e&&(e=t.x)})),e}get minY(){let e=this.data[0].y;return this.data.forEach((function(t){t.y<e&&(e=t.y)})),e}get maxY(){let e=this.data[0].y;return this.data.forEach((function(t){t.y>e&&(e=t.y)})),e}get xSpan(){return this.maxX-this.minX}get ySpan(){return this.maxY-this.minY}plot(e){let t=this.minX,n=this.minY,l=this.maxX-t,s=this.maxY-n,o=d.clientHeight/d.clientWidth;if(s/l<o)var u=t-.1*(E=1.25*l),h=-(n-.1*(m=E*o)-(m-1.25*s)/2)-m;else{var m,E;u=t-.1*(E=(m=1.25*s)/o)-(E-1.25*l)/2,h=-(n-.1*m)-m}d.setAttribute("viewBox",u+" "+h+" "+E+" "+m);let p=(this.xSpan+this.ySpan)/2/200;if(e==f.Mayer){if(this.data.length<2)throw Error("Mayer line only applicable to datasets with 2 or more points. ");let e=Math.floor(this.data.length/2),t=new i(0,0),n=new i(0,0);this.data.forEach((function(i,l){l<e?(t.x+=i.x,t.y+=i.y):(n.x+=i.x,n.y+=i.y)})),t.x/=e,t.y/=e,n.x/=this.data.length-e,n.y/=this.data.length-e;var y=(n.y-t.y)/(n.x-t.x),g=t.y-y*t.x;d.appendChild(a(u,-(u*y+g),u+E,-((u+E)*y+g),p,"#ff6600")),this.data.forEach((function(t,n){n<e?d.appendChild(r(t.x,-t.y,p,"#993d00")):d.appendChild(r(t.x,-t.y,p,"#ffa366"))})),d.appendChild(r(t.x,-t.y,2*p,"#993d00")),d.appendChild(r(n.x,-n.y,2*p,"#ffa366"))}else if(e==f.MedianMedian){if(this.data.length<3)throw Error("Median-median line only applicable to datasets with 2 or more points. ");let e=this.data,t=Math.round(e.length/3),n=function(){let n=(t-1)/2;return Number.isInteger(n)?e[n].x:(e[Math.floor(n)].x+e[Math.ceil(n)].x)/2}(),i=[],l=function(){let n=(t+(e.length-1-t))/2;return Number.isInteger(n)?e[n].x:(e[Math.floor(n)].x+e[Math.ceil(n)].x)/2}(),s=[],o=function(){let n=e.length-1-(t-1)/2;return Number.isInteger(n)?e[n].x:(e[Math.floor(n)].x+e[Math.ceil(n)].x)/2}(),f=[];this.data.forEach((function(n,l){l<t?i.push(n.y):l>e.length-1-t?f.push(n.y):s.push(n.y)})),i.sort();let h=c(i);s.sort();let m=c(s);f.sort();let C=c(f),v=(n+l+o)/3,x=(h+m+C)/3;g=x-(y=(C-h)/(o-n))*v;d.appendChild(a(u,-(u*y+g),u+E,-((u+E)*y+g),p,"#33cc33")),this.data.forEach((function(n,i){i<t?d.appendChild(r(n.x,-n.y,p,"#1f7a1f")):i>e.length-1-t?d.appendChild(r(n.x,-n.y,p,"#33cc33")):d.appendChild(r(n.x,-n.y,p,"#85e085"))})),d.appendChild(r(n,-h,2*p,"#1f7a1f")),d.appendChild(r(l,-m,2*p,"#33cc33")),d.appendChild(r(o,-C,2*p,"#85e085")),d.appendChild(r(v,-x,3*p,"#33cc33"))}return[y,g]}}const m=document.getElementById("dataset"),E=document.getElementById("dataset-entry"),p=document.getElementById("empty-entry"),y=p.firstElementChild,g=p.lastElementChild,C=["0","1","2","3","4","5","6","7","8","9",".","ArrowRight","ArrowLeft","Backspace","Space"];function v(e){(-1==C.indexOf(e.key)||"."==e.key&&e.target.value.includes("."))&&e.preventDefault()}function x(e){let t=e.target;isNaN(parseFloat(t.value))?t.classList.add("invalid-input"):t.classList.remove("invalid-input")}function b(){let e=E.content.firstElementChild.cloneNode(!0),t=e.firstElementChild.firstElementChild,n=e.lastElementChild.firstElementChild;return t.addEventListener("keydown",(function(i){let l=e.previousElementSibling,r=e.nextElementSibling;if("Backspace"==i.key)0==t.value.length&&0==n.value.length&&(l&&l.lastElementChild.firstElementChild.focus(),m.removeChild(e));else if("ArrowRight"==i.key||" "==i.key)(0==t.selectionStart&&0==t.value.length||t.selectionStart==t.value.length)&&(n.focus(),i.preventDefault());else if("ArrowUp"==i.key)l&&(l.firstElementChild.firstElementChild.focus(),i.preventDefault());else if("ArrowDown"==i.key||"Enter"==i.key){if(r.firstElementChild.firstElementChild)r.firstElementChild.firstElementChild.focus();else{b().firstElementChild.firstElementChild.focus()}i.preventDefault()}})),n.addEventListener("keydown",(function(i){let l=e.previousElementSibling,r=e.nextElementSibling;if("Backspace"==i.key)0==n.value.length&&t.focus();else if("ArrowLeft"==i.key)0==n.selectionStart&&(t.focus(),i.preventDefault());else if("ArrowUp"==i.key)l&&(l.lastElementChild.firstElementChild.focus(),i.preventDefault());else if("ArrowDown"==i.key||"Enter"==i.key){if(r.lastElementChild.firstElementChild)r.lastElementChild.firstElementChild.focus();else{b().lastElementChild.firstElementChild.focus()}i.preventDefault()}else if(" "==i.key)if(r.firstElementChild.firstElementChild)r.firstElementChild.firstElementChild.focus();else{b().firstElementChild.firstElementChild.focus()}})),t.addEventListener("keydown",v),n.addEventListener("keydown",v),t.addEventListener("input",x),n.addEventListener("input",x),t.addEventListener("focus",S),n.addEventListener("focus",S),m.insertBefore(e,p),e}function M(){return 0==document.getElementsByClassName("invalid-input").length}function L(){[].slice.call(document.getElementsByClassName("dataset-entry")).sort((function(e,t){return parseFloat(e.firstElementChild.firstElementChild.value)-parseFloat(t.firstElementChild.firstElementChild.value)})).forEach((function(e){m.insertBefore(e,p)}))}function w(){let e=document.getElementsByClassName("dataset-entry"),t=[];for(let n=0;n<e.length;n++)t.push(new i(parseFloat(e[n].firstElementChild.firstElementChild.value),parseFloat(e[n].lastElementChild.firstElementChild.value)));return new h(t)}const k=["mayer-group1","mayer-group2","median-median-group1","median-median-group2","median-median-group3"];function S(){k.forEach((function(e){let t=document.getElementsByClassName(e);for(;t.length>0;)t[0].classList.remove(e)}))}const B=document.getElementById("rule"),A=document.getElementById("help-menu");y.addEventListener("click",(function(){b().firstElementChild.firstElementChild.focus()})),g.addEventListener("click",(function(){b().lastElementChild.firstElementChild.focus()})),document.getElementById("median-median-button").addEventListener("click",(function(){if(S(),M()){o(),L();let e=w();e.sortByX(),function(){let e=document.getElementsByClassName("dataset-entry"),t=Math.floor(e.length/3);for(let n=0;n<e.length;n++)n<t?(e[n].firstElementChild.firstElementChild.classList.add("median-median-group1"),e[n].lastElementChild.firstElementChild.classList.add("median-median-group1")):n>e.length-1-t?(e[n].firstElementChild.firstElementChild.classList.add("median-median-group2"),e[n].lastElementChild.firstElementChild.classList.add("median-median-group2")):(e[n].firstElementChild.firstElementChild.classList.add("median-median-group3"),e[n].lastElementChild.firstElementChild.classList.add("median-median-group3"))}();let t=e.plot(f.MedianMedian);B.innerHTML="y = "+t[0]+"x + "+t[1]}else document.getElementsByClassName("invalid-input")[0].focus()})),document.getElementById("mayer-button").addEventListener("click",(function(){if(S(),M()){o(),L();let e=w();e.sortByX(),function(){let e=document.getElementsByClassName("dataset-entry"),t=Math.floor(e.length/2);for(let n=0;n<e.length;n++)n<t?(e[n].firstElementChild.firstElementChild.classList.add("mayer-group1"),e[n].lastElementChild.firstElementChild.classList.add("mayer-group1")):(e[n].firstElementChild.firstElementChild.classList.add("mayer-group2"),e[n].lastElementChild.firstElementChild.classList.add("mayer-group2"))}();let t=e.plot(f.Mayer);B.innerHTML="y = "+t[0]+"x + "+t[1]}else document.getElementsByClassName("invalid-input")[0].focus()})),A.addEventListener("click",(function(){A.toggleAttribute("hidden")})),document.getElementById("help-button").addEventListener("click",(function(){A.toggleAttribute("hidden")}))}]);